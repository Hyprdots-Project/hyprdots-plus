#!/usr/bin/env bash
#|--------/ /+--------------------------------------------------+--------/ /|#
#|-------/ /-| Script: install.sh                               |-------/ /-|#
#|------/ /--| Description: Installation script for Hyprdots++. |------/ /--|#
#|-----/ /---| Author: Marek ÄŒupr (cupr.marek2@gmail.com)       |-----/ /---|#
#|----/ /----|--------------------------------------------------|----/ /----|#
#|---/ /-----| Version: 1.0                                     |---/ /-----|#
#|--/ /------| Created: 2025-09-30                              |--/ /------|#
#|-/ /-------| Last Updated: 2025-09-30                         |-/ /-------|#
#|/ /--------+--------------------------------------------------+/ /--------|#

#-------------------------#
# import shared utilities #
#-------------------------#
if ! source "$(dirname "$(realpath "$0")")/shared_utils.sh"; then
  printf '%b\n' \
    "\033[0;31m[ERROR]\033[0m Failed to source 'shared_utils.sh'!" >&2
  exit 1
fi

#---------------------#
# main install script #
#---------------------#
run_installer() {
  cat << 'EOF'
-----------------------------------------------------------------------------

        .
       / \         _       _  _                  _     _        _     _
      /^  \      _| |_    | || |_  _ _ __ _ _ __| |___| |_ ____| |_ _| |_
     /  _  \    |_   _|   | __ | || | '_ \ '_/ _` / _ \  _(_-<_   _|_   _|
    /  | | ~\     |_|     |_||_|\_, | .__/_| \__,_\___/\__/__/ |_|   |_|
   /.-'   '-.\                  |__/|_|

-----------------------------------------------------------------------------

EOF

  log_info "Starting installation script for 'Hyprdots++'..."

  #--------------------#
  # pre-install script #
  #--------------------#
  if $install_flag && $restore_flag; then
    cat << 'EOF'

                _         _       _ _
 ___ ___ ___   |_|___ ___| |_ ___| | |
| . |  _| -_|  | |   |_ -|  _| .'| | |
|  _|_| |___|  |_|_|_|___|_| |__,|_|_|
|_|

EOF

    # "$SRC_DIR/install_pre.sh"
  fi

  #--------------#
  # main install #
  #--------------#
  if $install_flag; then
    cat << 'EOF'

           _        _         _       _ _
 _____ ___|_|___   |_|___ ___| |_ ___| | |
|     | .'| |   |  | |   |_ -|  _| .'| | |
|_|_|_|__,|_|_|_|  |_|_|_|___|_| |__,|_|_|

EOF

    # "$SRC_DIR/install_main.sh"
  fi

  #-----------------#
  # restore configs #
  #-----------------#
  if $restore_flag; then
    cat << 'EOF'

             _                              ___ _         
 ___ ___ ___| |_ ___ ___ ___    ___ ___ ___|  _|_|___ ___ 
|  _| -_|_ -|  _| . |  _| -_|  |  _| . |   |  _| | . |_ -|
|_| |___|___|_| |___|_| |___|  |___|___|_|_|_| |_|_  |___|
                                                 |___|    

EOF

  # "$SRC_DIR/restore_configs.sh"

fi

  #---------------------#
  # post-install script #
  #---------------------#
  if $install_flag && $restore_flag; then
    cat << 'EOF'

             _      _         _       _ _
 ___ ___ ___| |_   |_|___ ___| |_ ___| | |
| . | . |_ -|  _|  | |   |_ -|  _| .'| | |
|  _|___|___|_|    |_|_|_|___|_| |__,|_|_|
|_|

EOF

    # "$SRC_DIR/install_post.sh"
fi

  #--------------------------#
  # activate system services #
  #--------------------------#
  if $service_flag; then
    cat << 'EOF'

         _   _         _                          _
 ___ ___| |_|_|_ _ ___| |_ ___    ___ ___ ___ _ _|_|___ ___ ___
| .'|  _|  _| | | | .'|  _| -_|  |_ -| -_|  _| | | |  _| -_|_ -|
|__,|___|_| |_|\_/|__,|_| |___|  |___|___|_|  \_/|_|___|___|___|

EOF

    # "$SRC_DIR/activate_services.sh"
  fi

  #---------------#
  # end of script #
  #---------------#
  cat << 'EOF'

 _         _       _ _     _   _              _
|_|___ ___| |_ ___| | |___| |_|_|___ ___    _| |___ ___ ___
| |   |_ -|  _| .'| | | .'|  _| | . |   |  | . | . |   | -_|
|_|_|_|___|_| |__,|_|_|__,|_| |_|___|_|_|  |___|___|_|_|___|

EOF
}

main() {
  clear && parse_args "$@"
  run_installer "$@"  
  exit $EXIT_SUCCESS
}

main "$@"

# End of install.sh
